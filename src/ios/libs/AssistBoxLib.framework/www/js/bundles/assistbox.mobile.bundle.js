!function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=3)}([function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,s,l,c,u,d){document.addEventListener("deviceready",(function(){}),!1)}a.$inject=["$scope","$timeout","$state","$ionicPopup","$compile","$location","$ionicPlatform","TokenStorage","AuthenticationService","StringUtil","SignalService","UserService"],e.exports=a},function(e,t){function n(e,t,n,a,r,i,o,s,l,c,u,d,p,f,g,m,h,S,v,y,I,O,_){document.addEventListener("deviceready",(function(){"browser"!=cordova.platformId&&chrome.power.requestKeepAwake("display"),$("#videoDiv").append(i("<div class='loading'>Loading&#8230;</div>")(e)),$("#videoDiv").append(i(" <div  class='loadingSpinner'><span class='loadingSpan'> "+g.instant("ASSISTBOX_WAITING_CLAIM_HANDLER")+"</span></div>")(e))}),!1),document.addEventListener("deviceready",(function(){"android"==cordova.platformId?window.screen.orientation.lock("landscape-primary"):"ios"==cordova.platformId||window.screen.orientation.lock("landscape")}),!1),e.participants=[],e.muteText=g.instant("ASSISTBOX_MIC_OFF"),e.videCloseText=g.instant("ASSISTBOX_TURN_OFF");var A="Front",T=$("#icons"),b=!1;e.chatMessageList=[],e.sendMessageData={},e.sendMail={},e.newMessageCount=0,e.videoStatus=!0,e.muteStatus=!0,e.files=[],e.user=o.currentUser,e.companyId=e.user.companyId,e.selectedUserForSendMessage="ALL";var k=e.user.room;e.onlineUsers=u.onlineUsers;var C=function(t){return e.dateString=I("date")(t,"dd/MM/yyyy HH:mm"),e.dateString};e.downloadFile=function(t){m.getBinaryByIdWithoutDownload(t).then((function(t){if(200==t.status)if(function(e){for(var t=["jpg","jpeg","png","bmp","mpeg","mov","webm","weba","mp3","aif","wav","wma","mp3","wpl","cda","mpa","ogg","7z","zip","rar","xml","ai","ico","ps","psd","svf","tif","tiff","html","js","css","pps","ppt","pptx","odp","key","ods","xlr","xls","xlsx","tmp","doc","docx","txt","3g2","3gp","avi","flv","h264","m4v","mkv","mpg","rm","swf","vob","wmv","odt","pdf","rtf","tex","wks","wps","wpd"],n=e.split(".").pop(),a=0;a<t.length;a++)if(n.toUpperCase()===t[a].toUpperCase())return!0;return!1}(t.data.blobName)){var n=O.getPath()+("/rest/api/storageService/"+t.data.id+"/"+l.retrieve()),a=new XMLHttpRequest;a.onerror=function(n){console.log("file download failed"),M(g.instant("ERROR_OCCURED_IN_PERFORMING_FILE_TRANSFER")),document.querySelector("#progressbar"+t.data.id).remove();for(var a=0;a<e.chatMessageList.length;a++)if("file"==e.chatMessageList[a].messageType&&e.chatMessageList[a].binaryFileId==t.data.id){e.chatMessageList[a].fileEntryUrl="",e.chatMessageList[a].blobFileType="",$("#downloadFileDiv"+t.data.id).css("display","block"),$("#openFileDiv"+t.data.id).css("display","none");break}},a.addEventListener("progress",(function(e){if(e.lengthComputable){var n=e.loaded/e.total*100,a=(t.data.id,"progressbar"+t.data.id);D(Math.round(n),a)}})),a.onloadstart=function(n){console.log("file download started");var a=".message-bubble"+t.data.id+" .message-content-progressbar";$(a).append(i("<div class='progress'> <div id='progressbar"+t.data.id+"' class='progress-bar' role='progressbar'  aria-valuemin='0' aria-valuemax='100' style='width:0%'></div></div>")(e)),$("#downloadFileDiv"+t.data.id).css("display","none"),p.scrollBottom()},a.open("GET",n,!0),a.responseType="blob",a.onloadend=function(n){if(200==this.status){var a=this.response;window.requestFileSystem(LocalFileSystem.PERSISTENT,0,(function(n){console.log("file system open: "+n.name),n.root.getFile(t.data.blobName,{create:!0,exclusive:!1},(function(n){!function(t,n,a){t.createWriter((function(r){r.onwriteend=function(){console.log("file download completed"),D(100,"progressbar"+a);for(var r=0;r<e.chatMessageList.length;r++)"file"==e.chatMessageList[r].messageType&&e.chatMessageList[r].binaryFileId==a&&(e.chatMessageList[r].fileEntryUrl=t.toURL(),e.chatMessageList[r].blobFileType=n.type,$("#downloadFileDiv"+a).css("display","none"),$("#openFileDiv"+a).css("display","block"));console.log("Successful file write...")},r.onerror=function(e){console.log("Failed file write: "+e.toString())},r.write(n,!0)}))}(n,a,t.data.id)}))}))}},a.send()}else{var r=g.instant("ASSISTBOX_UNSUPPORTED_FILE_FORMAT_TO_DOWNLOAD");M(r)}})).catch((function(e){M(e)}))},e.openFile=function(t){for(var n=0;n<e.chatMessageList.length;n++)if(e.chatMessageList[n].binaryFileId==t){var a=e.chatMessageList[n].fileEntryUrl;cordova.plugins.fileOpener2.open(a,"",{error:function(e){console.log("Error status: "+e.status+" - Error message: "+e.message)},success:function(){console.log("file opened successfully")}});break}},e.changeCameraDirection=function(e){console.log("changeCameraDirection start");var t=$(".clientContent"),a=$(".video-container"),r=Math.floor(.9*window.innerWidth);t.width(r),t.height(Math.floor(window.innerHeight-2*$(".video-container")[0].offsetLeft)),a.width(t.width()),a.height(t.height()),localPositionW=a.width()-110,localPositionH=a.height()-250,T.css("height",60),"Front"==A?sessionStorage.setItem("camera","Back"):sessionStorage.setItem("camera","Front"),A=null==A||null==A?"Front":sessionStorage.getItem("camera"),cordova.platformId&&("browser"==cordova.platformId?(SignalServiceNg.sendDataWS({targetRoom:k},"changeCameraProcess",{msg:currentPos},(function(e){console.log("Send data ack : "+e)})),n.location.reload()):"android"!=cordova.platformId&&"ios"!=cordova.platformId||cordova.plugins.phonertc.changeCameraDirection({container:a[0],local:{position:[localPositionW,localPositionH],size:[200,200]},camera:A}),console.log("changeCameraDirection end"))},e.mute=function(){e.muteStatus?(e.muteStatus=!1,window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_YOUR_MIC_OFF"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){})),e.muteText=g.instant("ASSISTBOX_MIC_ON")):(e.muteStatus=!0,window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_YOUR_MIC_ON"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){})),e.muteText=g.instant("ASSISTBOX_MIC_OFF")),u.renegotiate(e.muteStatus,e.videoStatus)};var E=function(e){var t={};return t.model=device.model,t.appointmentId=e,t.manufacturer=device.manufacturer,t.platform=device.platform,t.serial=device.serial,t.uuid=device.uuid,t.deviceVersion=device.version,t};function w(e){if("ios"!=cordova.platformId){var t=e.keyboardHeight,n=$(".wrapper-chat")[0].offsetHeight-t;$(".wrapper-chat").css("height",n+"px")}}function N(e){"ios"!=cordova.platformId&&($(".platform-android .wrapper-chat").css("height","100%"),$(".platform-ios .wrapper-chat").css("height","100%"))}e.turnOffVideo=function(){e.videoStatus?(e.videoStatus=!1,window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_YOUR_CAM_IS_OFF"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){})),e.videCloseText=g.instant("ASSISTBOX_TURN_ON")):(e.videoStatus=!0,window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_YOUR_CAM_IS_ON"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){})),e.videCloseText=g.instant("ASSISTBOX_TURN_OFF")),u.renegotiate(e.muteStatus,e.videoStatus)},e.sendMessage=function(){u.onlineUsers.length>0?(null!=e.sendMessageData.message&&0!=e.sendMessageData.message.length&&(e.sendMessageData.messageDateTime=new Date,e.sendMessageData.messageDateString=C(new Date),e.sendMessageData.appointmentId=k,e.sendMessageData.fromUser=e.user,e.sendMessageData.toUser=e.selectedUserForSendMessage,e.sendMessageData.messageType="text",e.sendMessageData.binaryFileId=null,e.sendMessageData.binaryFileDto={},e.sendMessageData.binaryFileDto.blobName=null,e.sendMessageData.senderType="MOBILE_USER",e.chatMessageList.push(e.sendMessageData),u.sendChatMessage(e.sendMessageData),e.sendMessageData={},p.scrollBottom()),t((function(){window.cordova.plugins.Keyboard.isVisible=!0}),500)):window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_NO_ONLINE_USER_FOR_SEND_MESSAGE"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){}))},f.fromTemplateUrl("chatModal.html",(function(t){e.chatModal=t}),{scope:e,animation:"slide-in-up"}),e.openChatModal=function(){if(!b)if(u.onlineUsers.length>0){b=!0,e.chatModal.show(),e.newMessageCount=0,document.getElementById("fileInput").onclick=function(){u.onlineUsers.length>0?(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(),cordova.plugins.Keyboard.close(),e.actionSelectFileType()):window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_NO_ONLINE_USER_FOR_SEND_MESSAGE"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){}))};var t=$(".video-container");localPositionW=t.width()-110,localPositionH=t.height()-100,cordova.plugins.phonertc.hideVideoView(),p.scrollBottom(),cordova.plugins.Keyboard.hideKeyboardAccessoryBar(),cordova.plugins.Keyboard.close()}else b=!1,window.plugins.toast.showWithOptions({message:g.instant("ASSISTBOX_NO_ONLINE_USER_FOR_SEND_MESSAGE"),duration:"short",position:"bottom",addPixelsY:-40,styling:{backgroundColor:"#4D2338"}},(function(){}),(function(){}))},e.closeChatModal=function(){b=!1,e.chatModal.hide(),$(".video-container").css("display","block");$(".video-container");cordova.plugins.phonertc.showVideoView(),cordova.plugins.Keyboard.close()},window.addEventListener("native.keyboardshow",w),window.addEventListener("native.keyboardhide",N);e.keyPressedOnChatTextBox=function(t){"13"==t&&e.sendMessage()},document.addEventListener("deviceready",(function(){}),!1),r.$on("onlineUser",(function(t,n){navigator.notification.beep(1),e.participants.push(n.fullName)})),r.$on("offlineUser",(function(t,n){var a=e.participants.indexOf(n.fullName);a>-1&&e.participants.splice(a,1)})),e.stopMeeting=function(){cordova.plugins.phonertc.hideVideoView(),u.endCall(),e.$destroy()},e.$on("chatMessage",(function(t,n){b||navigator.notification.beep(1);var a=n.messageData;e.messageData=a,e.messageData.messageDateString=C(new Date),e.chatMessageList.push(e.messageData),null!=e.chatModal._isShown&&0!=e.chatModal._isShown||e.newMessageCount++,e.$apply(),$("#chat-message-notifi").css("display","block"),p.scrollBottom(),"file"==e.messageData.messageType&&($("#downloadFileDiv"+e.messageData.binaryFileId).css("display","block"),$("#openFileDiv"+e.messageData.binaryFileId).css("display","none"))})),e.actionSelectFileType=function(){var t=S.show({buttons:[{text:"<i class='icon ion-camera'></i> <i class='action-sheet-button-text'>"+g.instant("ASSISTBOX_CAPTURE_PHOTO")+"</i>"},{text:"<i class='icon ion-ios-videocam'></i> <i class='action-sheet-button-text'>"+g.instant("ASSISTBOX_RECORD_VIDEO")+"</i>"},{text:"<i class='icon ion-images'></i> <i class='action-sheet-button-text'>"+g.instant("ASSISTBOX_PHOTO_VIDEO_LIBRARY")+"</i>"},{text:"<i class='icon ion-document'></i> <i class='action-sheet-button-text'>"+g.instant("ASSISTBOX_DOCUMENT")+"</i>"}],cancelText:"Cancel",cancel:function(){},buttonClicked:function(n){t(),0==n?e.captureMedia(!1):1==n?e.captureMedia(!0):2==n?e.selectMedia():3==n&&e.selectDocument()}})},e.captureMedia=function(t){e.captureMediaWithCallBacks(t,null,null)},e.captureMediaWithCallBacks=function(e,t,n){var a=function(n){var a=null;a="ios"==cordova.platformId?"file://"+n[0].fullPath:n[0].fullPath,P(a),t&&t(),e||cordova.plugins.phonertc.startCapture()},r=function(t){if(e||cordova.plugins.phonertc.startCapture(),n)if(t&&3==t.code){n("user_cancelled_photo_capturing")}else n(t)};if(e)if(u.callInProgress){var i=g.instant("UNABLE_TO_RECORD_VIDEO_DURING_CALL");M(i)}else navigator.device.capture.captureVideo(a,r,{limit:1,duration:900});else cordova.plugins.phonertc.stopCapture(),navigator.device.capture.captureImage(a,r,{limit:1})},e.selectDocument=function(){"ios"==cordova.platformId?DocumentPicker.getFile("pdf",(function(e){P(e)}),(function(e){console.log(e)})):window.plugins.mfilechooser.open([],(function(e){var t=null;t="ios"==cordova.platformId?e:"file:"+e,P(t)}),(function(e){M(e)}))},e.selectMedia=function(){navigator.camera.getPicture((function(e){var t=null;t="ios"==cordova.platformId?e:"file:"+e;P(t)}),(function(){console.log("Error (Select video)")}),{quality:50,destinationType:Camera.DestinationType.FILE_URI,sourceType:Camera.PictureSourceType.PHOTOLIBRARY,mediaType:Camera.MediaType.ALLMEDIA})};var L=function(){v.get("$ionicLoading").hide()},P=function(e){window.resolveLocalFileSystemURL(e,(function(e){e.file((function(e){if(e.size<2097e5){var t=new FileReader;t.onloadend=function(){var t=this.result;y.findMimeTypeFromFileName(e.name).then((function(n){var a=new Blob([new Uint8Array(t)],{type:n});R(a,e.name)})),L()},t.onerror=function(){L()},t.onabort=function(){L()},t.readAsArrayBuffer(e),v.get("$ionicLoading").show({content:"Loading",animation:"fade-in",showBackdrop:!0})}else{var n=g.instant("FILE_CANNOT_BE_LARGER_THAN_200MB");M(n)}}))}))},B=["JPG","JPEG","PNG","BMP","ICO","PS","TIF","TIFF"],R=function(n,a){n.name=a;var r=new FormData,i=Math.random().toString(36).substr(2,9);r.append("file",n,"chat-"+k+"-"+i),console.log("file upload started"),p.scrollBottom();var o={message:"",senderType:"MOBILE_USER"};o.binaryFileId=i,o.messageDateTime=new Date,o.messageDateString=C(new Date),o.fromUser=e.user,o.fromUserFullname=e.user.fullName,o.toUser=e.selectedUserForSendMessage,o.messageType="file",o.binaryFileDto={},o.binaryFileDto.blobName=g.instant("ASSISTBOX_UPLOAD_IN_PROGRESS"),e.chatMessageList.push(o),t((function(){m.getChunkSize().then(e=>{let r=t=>{var a=Math.ceil(n.size/e);let r=Math.floor(t/a*100);D(r,"progressbar"+i)},s=e=>{D(100,"progressbar"+i),o.binaryId=e.id,o.binaryFileId=e.id,o.binaryFileDto.blobName=e.blobName,o.blobName=e.blobName,o.containerReference=e.containerReference,t((function(){u.sendChatMessage(o)}),1e3)},l=e=>{M(e)};t((function(){var e;e=function(e){var t=e.substr(e.lastIndexOf(".")+1);return B.includes(t.toUpperCase())}(a)?"IMAGE":"CHAT",U(i),m.createChunkedAppointmentBinaryFile(e,k,n,r).then(s).catch(l)}),500)})}),500)},M=function(e){e.data?window.plugins.toast.showWithOptions({message:e.data.errorMessage,duration:"long",position:"bottom",addPixelsY:-40},(function(){}),(function(){})):window.plugins.toast.showWithOptions({message:e,duration:"long",position:"bottom",addPixelsY:-40},(function(){}),(function(){}))},U=function(t){$(".message-bubble"+t+" .message-content-progressbar").append(i("<div class='progress'> <div id='progressbar"+t+"' class='progress-bar' role='progressbar'  aria-valuemin='0' aria-valuemax='100' style='width:0%'></div></div>")(e)),p.scrollBottom()},D=function(e,t){document.getElementById(t).style.width=e+"%",document.getElementById(t).innerText=e+"%"};e.updateVideoPosition=function(){r.$broadcast("updateVideoPosition")},document.addEventListener("deviceready",(function(){cordova.plugins.phonertc.showVideoView(),u.joinRoom(k),_.createAppointmentDeviceInfo(E(k))}),!1),e.$on("triggerRemoteAction",(function(e,t){var n=t.remoteActionRequestMessage,a=t.callBack;switch(n.type){case"triggerCapturePhoto":F(n,a);break;default:console.log("Process function is not found for remote action: "+n.type)}}));var F=function(t,n){var a=t.type,r=function(){n({type:a,status:"success"}),b||e.openChatModal()},i=function(e){n({type:a,status:"error",error:e})},o=g.instant("ASSISTBOX_CAPTURE_PHOTO_CONFIRMATION_TITLE"),s=g.instant("ASSISTBOX_CAPTURE_PHOTO_CONFIRMATION"),l=g.instant("ASSISTBOX_APPROVE"),c=g.instant("ASSISTBOX_DENY");navigator.notification.confirm(s,(function(t){if(1==t)e.captureMediaWithCallBacks(!1,r,i);else{i("remote_action_rejected")}}),o,[l,c])};e.$on("$destroy",(function(){console.log("on destroy.."),u.leaveRoom(k),u.offline(),u.disconnectCurrentUserSocket(),l.clear(),cordova.plugins.Keyboard.close(),b=!1,e.chatModal.remove(),u.removeListeners(),cordova.plugins.phonertc.hideVideoView(),window.removeEventListener("native.keyboardshow",w),window.removeEventListener("native.keyboardhide",N),"true"==c.getAndRemove("externalSystem")?AssistBoxRedirection.goBackToMainApplication(null,null,null):a.go("mainPage",{location:"replace"})})),e.$on("leftCallInfo",(function(t,n){console.log("leftCallInfo fired!!!!"),e.$destroy()})),e.$on("appPaused",(function(e,t){console.log("appPaused on client")})),e.$on("callAnswered",(function(t,n){e.closeChatModal()}))}n.$inject=["$scope","$timeout","$window","$state","$rootScope","$compile","$stateParams","AppointmentService","TokenStorage","LocalStorageUtil","SignalService","UserService","$ionicScrollDelegate","$ionicModal","$translate","FileService","StringUtil","$ionicActionSheet","$injector","MimeTypeService","$filter","ServicePath","AppointmentDeviceInfoService"],e.exports=n},function(e,t,n){"use strict";function a(e,t,n,a,r,i,o,s,l,c,u){e.logOut=function(){NativeStorage.remove("username ",(function(){}),(function(){})),NativeStorage.remove("vmeetify_token",(function(){c.clear(),r.go("login",{animate:"side-left-right",reload:!0})}),(function(){}))}}a.$inject=["$scope","$timeout","$http","$stateParams","$state","$compile","$location","$ionicPlatform","$ionicPopup","TokenStorage","LocalStorageUtil"],e.exports=a},function(e,t,n){n(4);var a=angular.module("AssistBoxMobile",["ionic","ui.router","pascalprecht.translate"]);n(0),n(1),n(2),a.controller("MainPageController",n(0)),a.controller("ClientController",n(1)),a.controller("AppController",n(2)),a.factory("TokenStorage",n(5)),a.factory("LocalStorageUtil",n(6)),a.factory("TokenAuthInterceptor",n(7)),a.factory("ServicePath",n(8)),a.service("AppointmentService",n(9)),a.service("AppointmentDeviceInfoService",n(10)),a.service("FileService",n(11)),a.service("UserService",n(12)),a.service("ConfigurationService",n(13)),a.service("SignalService",n(14)),a.service("AuthenticationService",n(15)),a.service("StringUtil",n(16)),a.factory("BusyService",n(17)),a.service("MimeTypeService",n(18)),a.config(["$stateProvider","$urlRouterProvider","$httpProvider","$ionicConfigProvider","$translateProvider",function(e,t,n,a,r){a.tabs.position("bottom"),a.navBar.alignTitle("center"),n.interceptors.push("TokenAuthInterceptor"),n.interceptors.push("BusyService"),a.views.maxCache(0),e.state("app",{url:"/app",abstract:!0,templateUrl:"menu.html",controller:"AppController"}).state("mainPage",{url:"/main-page",templateUrl:"main-page.html",controller:"MainPageController"}).state("videoCallMobile",{url:"/videoCallMobile",params:{currentUser:null},templateUrl:"client.html",controller:"ClientController"});var i=navigator.language||navigator.userLanguage,o={ASSISTBOX_SHOW_WHAT_YOU_SEE:"Your Visual Expert",ASSISTBOX_VIDEO_SESSION_MUST_BE:"Email or SMS link must be used to start video session",ASSISTBOX_WAITING_CLAIM_HANDLER:"Awaiting Claim Handler",ASSISTBOX_CLOSE:"Close",ASSISTBOX_END_CALL:"End Call",ASSISTBOX_MUTE_MIC:"Mute Mic",ASSISTBOX_CHAT:"Chat",ASSISTBOX_SELECT:"Select",ASSISTBOX_ALL:"All",ASSISTBOX_REPLY:"Write a message",ASSISTBOX_TURN_ON:"Cam On",ASSISTBOX_TURN_OFF:"Cam Off",ASSISTBOX_MIC_ON:"Mic On",ASSISTBOX_MIC_OFF:"Mic Off",ASSISTBOX_YOUR_MIC_ON:"Your mic is on",LANDSCAPE_MODE_WARNING:"Please use landscape mode for a better experience",ASSISTBOX_YOUR_MIC_OFF:"Your mic is off",ASSISTBOX_YOUR_CAM_IS_OFF:"Your cam is off",ASSISTBOX_YOUR_CAM_IS_ON:"Your cam is on",ASSISTBOX_WARNING:"Warning",ASSISTBOX_CHANGE_CAM:"Change",ASSISTBOX_BUSY:"is busy",ASSISTBOX_HAS_REJECTED_CALL:"has rejected call",ASSISTBOX_HAS_LEFT_CALL:"has left call",ASSISTBOX_JOINED_THE_CALL:"joined the call",ASSISTBOX_OFFLINE:"offline",ASSISTBOX_ONLINE:"online",ASSISTBOX_USAGE_POLICY_TITLE:"Acknowledgement",ASSISTBOX_USAGE_POLICY:"This call is being recorded for quality-assurance purposes. During this video call, you will share your personal data (voice, sight, content etc.) We will keep your video call record, photo and approval information with your IP information and time stamp. In addition, during this video call we will be able to get your mobile device’s location and open/close it’s flash. I have read Video Call Information and I got the details of this service. I accept the terms and I want to use this service. I accept and declare that my data can be processed, used and I keep informed about Data Protection Code. I accept and declare that I have given authority and explicit consent to Nayah Yazılım Tic. Ltd. Şti. according Data Protection Code.\n\nThis application belongs to Nayah Yazılım Tic. Ltd. Şti. (hereinafter referred to as “NAYAH”) and is operated by this company.\n\nInformation on Protection of Personal Data\n\n1) The Purpose of Personal Data Collection\n\nPersonal data will be used to ensure that NAYAH will be able to continue providing services in its legitimate field of activity. For this reason, such personal data shall be collected, processed and stored within the framework of including but not limited to policy arrangements, insurance premiums, maintenance of compensation processes, demand requests, policy renewal proposals, damage assessment and compensation processes and for all other purposes required by the legitimate field of activity.\n\n2) The Purpose of Personal Data Usage\n\nIn accordance with the legislation, NAYAH will be able to record, store, update, disclose, transfer, classify and process your personal data.\nYour personal data can be used in various processes and statistical evaluations including but not limited to data mining, database creation, reporting, marketing, market research and business development.\n\n3) Security of Personal Data\n\nPersonal data shared with NAYAH are under NAYAH's supervision and control. NAYAH shall provide all necessary organization and take technical measures to protect the confidentiality and integrity of the data in accordance with the provisions of the legislation.\n\n4) Sharing With Third Parties\n\nArising from insurance contracts and insurance policies that are within the scope of any damage assessment or support service, fulfilling the obligations that are included in the legitimate field of activity of NAYAH, personal data can be shared with judicial, administrative or similar authorities, official and private institutions and organizations such as Republic of Turkey Ministry of Treasury and Finance, General Directorate of Insurance, Insurance Supervision Agency, Insurance Association of Turkey, Insurance Information and Monitoring Center, Life Insurance Information Center (HAYMER), Health Insurance Information Center (SAGMER), SISBIS, Pension Monitoring Center (EGM).\n\n5) Abroad Data Transfer\n\nThe personal data obtained can be shared with Nayah Yazılım Tic. Ltd. Şti., subsidiary and affiliate companies of Nayah Yazılım Tic. Ltd. Şti., third parties or legal entities abroad that Nayah Yazılım Tic. Ltd. Şti. is providing or receiving service from. Also, within the framework of storage, processing of data and in the context of IT Services, the personal data obtained may be used in the Cloud environment and applications in domestic and / or abroad.\nYour personal data may be transferred abroad in accordance with the legislation for the purpose of processing, storage, administration or any other use specified in this policy. All necessary measures are taken to ensure that your personal data is properly protected.",ASSISTBOX_APPROVE:"Approve",ASSISTBOX_DENY:"Deny",ASSISTBOX_PERMISSION_FAILED:"Please check permissions.",ASSISTBOX_PERMISSION_FAILED_TITLE:"Permission Error",ERROR_OCCURED_IN_PERFORMING_FILE_TRANSFER:"Error occured in performing file transfer.",ASSISTBOX_NO_ONLINE_USER_FOR_SEND_MESSAGE:"There is not any online user to send message.",ASSISTBOX_CAMERA:"Camera",ASSISTBOX_PHOTO_VIDEO_LIBRARY:"Photo & Video Library",ASSISTBOX_DOCUMENT:"Document",FILE_CANNOT_BE_LARGER_THAN_200MB:"It's not allowed to send file larger than 200 MB.",ERROR_OCCURED_IN_CAPTURING_MEDIA:"Error occured in capturing media. Error code: ",ASSISTBOX_CAPTURE_PHOTO:"Capture Photo",ASSISTBOX_RECORD_VIDEO:"Record Video",ASSISTBOX_DOWNLOAD:"Download",ASSISTBOX_OPEN:"Open",ASSISTBOX_UNSUPPORTED_FILE_FORMAT_TO_DOWNLOAD:"Unsupported file format.",ASSISTBOX_CONNECTION_ERROR_TITLE:"Connection Error",ASSISTBOX_CONNECTION_ERROR_MESSAGE:"Please check your internet connection and try again.",ASSISTBOX_CONNECTION_ERROR_TRY_AGAIN_BTN:"Try Again",ASSISTBOX_SENDING:"Sending...",ASSISTBOX_UPLOAD_IN_PROGRESS:"Upload in Progress...",UNABLE_TO_RECORD_VIDEO_DURING_CALL:"Unable to record video during call",ASSISTBOX_CAPTURE_PHOTO_CONFIRMATION_TITLE:"Capture Photo",ASSISTBOX_CAPTURE_PHOTO_CONFIRMATION:"The expert wants to open the camera application for you to capture the photo. If you approve, the photo will be sent to the expert using the instant messaging screen. Please do not leave the video call until the photo is uploaded."};"en-US"==i||"en-UK"==i||"en-GB"==i?r.translations(i,o):"tr-TR"==i||"tr"==i||"TR"==i?r.translations(i,{ASSISTBOX_SHOW_WHAT_YOU_SEE:"Eksperim Yanımda",ASSISTBOX_VIDEO_SESSION_MUST_BE:"Görüşme SMS ya da e-mail ile iletilen link üzerinden başlatılmalıdır.",ASSISTBOX_WAITING_CLAIM_HANDLER:"Hasar Danışmanı Bekleniyor",ASSISTBOX_CLOSE:"Kapat",ASSISTBOX_END_CALL:"Görüşmeyi Bitir",ASSISTBOX_MUTE_MIC:"Sesi Kapat",ASSISTBOX_CHAT:"Sohbet",ASSISTBOX_SELECT:"Seçiniz",ASSISTBOX_ALL:"Herkes",ASSISTBOX_REPLY:"Cevap Yaz",ASSISTBOX_TURN_ON:"Kamera Aç",ASSISTBOX_TURN_OFF:"Kamera Kapat",ASSISTBOX_MIC_ON:"Sesi Aç",ASSISTBOX_MIC_OFF:"Sesi Kapat",ASSISTBOX_YOUR_MIC_ON:"Sesiniz şuan açık",ASSISTBOX_YOUR_MIC_OFF:"Sesiniz şuan kapalı",LANDSCAPE_MODE_WARNING:"Daha iyi bir deneyim için lütfen cihazınızı yatay konuma getirin.",ASSISTBOX_YOUR_CAM_IS_OFF:"Kameranız şuan kapalı",ASSISTBOX_YOUR_CAM_IS_ON:"Kameranız şuan açık",ASSISTBOX_WARNING:"Uyarı",ASSISTBOX_CHANGE_CAM:"Değiştir",ASSISTBOX_BUSY:"meşgul",ASSISTBOX_HAS_REJECTED_CALL:"aramayı reddetti",ASSISTBOX_HAS_LEFT_CALL:"aramadan ayrıldı",ASSISTBOX_JOINED_THE_CALL:"görüşmeye katıldı",ASSISTBOX_OFFLINE:"çevrimdışı",ASSISTBOX_ONLINE:"çevrimiçi",ASSISTBOX_USAGE_POLICY_TITLE:"AssistBox Bilgilendirme Metni",ASSISTBOX_USAGE_POLICY:"Yaptığınız görüşme hizmet kalitesi amacı ile kayıt altına alınacaktır. Bu iletişim yönetimini kullanarak ses, görüntü, içerik v.b. kişisel verilerinizi paylaşmış olursunuz. Görüşme kaydınız ve onay bilginiz IP adresinizle birlikte ve zaman damgalı olarak tutulacaktır. Ek olarak, gerçekleştireceğiniz görüşme esnasında mobil cihazınızın konumu alınabilecek ve flaşı uzaktan açılıp kapatılabilecektir. Görüntülü arama bilgilendirme metnini okudum, bu hizmetin özelliklerini kavradım. Belirtilen şartları kabul ediyor ve bu hizmeti kullanmak istiyorum. Kişisel Verilerin Korunması Kanunu kapsamında verilerimin işlenebileceğini, kullanılabileceğini ve bu konuda bilgilendirildiğimi, Nayah Yazılım Tic. Ltd. Şti.’ye bu konuda yetki ve açık rıza verdiğimi kabul ve beyan ederim.\n\nBu uygulama, Nayah Yazılım Tic. Ltd. Şti.’ye (Bundan sonra “NAYAH” olarak anılacaktır) ait olup yine onun tarafından işletilmektedir.\n\nKişisel Verilerin Korunmasına İlişkin Bilgilendirme\n\n1) Kişisel Verilerin Toplanma Amacı\n\nKişisel veriler, Nayah Yazılım Tic. Ltd. Şti. meşru faaliyet alanında verdiği hizmetleri sürdürebilmesi amacıyla kullanılacaktır. Bu nedenle söz konusu kişisel veriler, poliçe düzenlenmesi, sigorta primlerinin belirlenmesi, tazminat süreçlerinin sürdürülebilmesi, taleplerin yöneltilmesi, poliçe yenileme teklifinin yapılması, hasar tespit ve tazmin süreçleri ve bunlarla sınırlı olmamak üzere meşru faaliyet alanının gerektirdiği diğer tüm amaçlar çerçevesince toplanacak, işlenecek ve saklanacaktır.\n\n2) Kişisel Verilerin Kullanım Amacı\n\nNAYAH, mevzuat kapsamında kişisel verilerinizi kaydedebilecek, saklayabilecek, güncelleyebilecek, üçüncü kişilere açıklayabilecek, devredebilecek, sınıflandırabilecek ve işleyebilecektir.\nSöz konusu kişisel verileriniz; veri madenciliği, veri tabanı oluşturma, raporlama, pazarlama, pazar araştırması ve iş geliştirme faaliyetleri amacıyla ve fakat bunlarla sınırlı olmamak kaydıyla işlenebilecek ve çeşitli istatistiksel değerlendirmelerde kullanılabilecektir.\n\n3) Kişisel Verilerin Güvenliği\n\nNAYAH ile paylaşılan kişisel veriler NAYAH’ın gözetimi ve kontrolü altındadır. NAYAH mevzuat hükümleri gereğince verilerin gizliliğinin ve bütünlüğünün korunması amacıyla gerekli tüm organizasyonu sağlar ve teknik önlemleri alır.\n\n4) Üçüncü Kişilerle Paylaşım\n\nSigorta sözleşmesi ile sigorta poliçelerinden kaynaklanan ve NAYAH’ın meşru faaliyet alanına giren yükümlülüklerin yerine getirilebilmesi için her türlü hasar tespit veya destek hizmeti kapsamında; NAYAH tarafından hizmet alınan ve/veya hizmet sağlanan Sigorta Şirketleri, eksper kuruluşları ve benzeri ile T.C. Hazine Müsteşarlığı, Sigortacılık Genel Müdürlüğü, Sigorta Şirketleri Birliği, Sigorta Bilgi ve Gözetim Merkezi, Hayat Sigortaları Bilgi Merkezi (HAYMER), Sağlık Sigortaları Bilgi Merkezi (SAGMER), SİSBİS, Emeklilik Gözetim Merkezi (EGM) olmak üzere, adli ve idari makamlar ve benzeri resmi ve özel kurum ve kuruluşlar ile veriler paylaşılabilecektir.\n\n5) Yurtdışına Veri Aktarımı\n\nElde edilen kişisel veriler, mevzuatın izin verdiği ölçü ve şekilde, Nayah Yazılım Tic. Ltd. Şti., Nayah Yazılım Tic. Ltd. Şti.’nin bağlı ve iştirak şirketleri, yurtdışında Nayah Yazılım Tic. Ltd. Şti.’nin hizmet aldığı ve/veya sağladığı üçüncü gerçek ya da tüzel kişiler ile paylaşılabilecektir. Ayrıca; elde edilen kişisel veriler, bunlar dışında, verinin saklanması, işlenmesi ve “Bilgi İşlem Hizmetleri” çerçevesinde, Bulut (Cloud) ortamı ve uygulamalarında da yurtiçi ve/veya yurtdışında kullanılabilecektir. İşlenme, depolanma, idare veya işbu politikada belirtilmiş başkaca bir kullanım amacıyla kişisel verileriniz mevzuata uygun biçimde yurt dışına aktarabilir. Bu aktarımlarda kişisel verilerinizin gerektiği şekilde korunması için gerekli tüm tedbirler alınır.",ASSISTBOX_APPROVE:"Onayla",ASSISTBOX_DENY:"Reddet",ASSISTBOX_PERMISSION_FAILED:"Uygulamanın ses ve video kaydı izinlerini kontrol ediniz.",ASSISTBOX_PERMISSION_FAILED_TITLE:"İzin Hatası",ERROR_OCCURED_IN_PERFORMING_FILE_TRANSFER:"Dosya gönderimi sırasında hata ile karşılaşıldı.",ASSISTBOX_NO_ONLINE_USER_FOR_SEND_MESSAGE:"Mesaj gönderebileceğiniz bir online kullanıcı bulunmamaktadır.",ASSISTBOX_CAMERA:"Kamera",ASSISTBOX_PHOTO_VIDEO_LIBRARY:"Fotoğraf ve Video Galerisi",ASSISTBOX_DOCUMENT:"Belge",FILE_CANNOT_BE_LARGER_THAN_200MB:"Gönderilecek dosya 200 MB'dan büyük olamaz.",ERROR_OCCURED_IN_CAPTURING_MEDIA:"Foto veya video çekimi sırasında hata oluştu. Hata kodu: ",ASSISTBOX_CAPTURE_PHOTO:"Fotoğraf Çekme",ASSISTBOX_RECORD_VIDEO:"Video Kaydetme",ASSISTBOX_DOWNLOAD:"İndir",ASSISTBOX_OPEN:"Aç",ASSISTBOX_UNSUPPORTED_FILE_FORMAT_TO_DOWNLOAD:"İndirme işlemi için desteklenmeyen bir dosya tipidir. Dosya indirme işlemine devam edilemez.",ASSISTBOX_CONNECTION_ERROR_TITLE:"Bağlantı Hatası",ASSISTBOX_CONNECTION_ERROR_MESSAGE:"Lütfen internet bağlantınızı kontrol edip tekrar deneyiniz.",ASSISTBOX_CONNECTION_ERROR_TRY_AGAIN_BTN:"Tekrar Dene",ASSISTBOX_SENDING:"Gönderiliyor...",ASSISTBOX_UPLOAD_IN_PROGRESS:"Yükleme Devam Ediyor...",UNABLE_TO_RECORD_VIDEO_DURING_CALL:"Görüntülü görüşme sırasında video kaydı yapılamaz",ASSISTBOX_CAPTURE_PHOTO_CONFIRMATION_TITLE:"Fotoğraf Çekim Onayı",ASSISTBOX_CAPTURE_PHOTO_CONFIRMATION:"Görüşme yaptığınız kişi fotoğrafı çekebilmeniz için kamera uygulamasını açmak istiyor. Onaylamanız durumunda fotoğraf anlık sohbet ekranından uzmana gönderilecektir. Lütfen fotoğraf yüklenene kadar görüşmeden ayrılmayın."}):(i="en",r.translations(i,o)),r.useSanitizeValueStrategy("escaped"),r.preferredLanguage(i)}]),a.run(["$ionicPlatform","$rootScope","$ionicHistory","SignalService","UserService","$state","TokenStorage","$timeout","ConfigurationService","$translate","$location","ServicePath","LocalStorageUtil",function(e,t,n,a,r,i,o,s,l,c,u,d,p){e.ready((function(){function s(e){var n=u();p.store("externalSystem",n),n?function(e){var n=h("accessToken"),s=h("mobileServiceEndpoint"),u=h("mobileStorageEndpoint");if("deviceready"==e){o.retrieve()&&t.$broadcast("$destroy");var p=c.instant("ASSISTBOX_USAGE_POLICY_TITLE"),S=c.instant("ASSISTBOX_USAGE_POLICY"),v=c.instant("ASSISTBOX_APPROVE"),y=c.instant("ASSISTBOX_DENY");navigator.notification.confirm(S,(function(e){if(1==e){cordova.plugins.phonertc.checkPermissions((function(){o.store(n);var e=o.retrieve();d.setPath(s),d.setStoragePath(u),e&&r.getDataFromJwtToken(e).then((function(t){var n=t.data.appointmentId,r=t.data.fullName,o=t.data.companyId,s={fullName:r,socket:"",room:n,uuid:g(),companyId:o};l.getConfigurationsByTypeAndCompanyId("SIGNAL_SERVER",o).then((function(t){a.connect(t.data.SIGNAL_SERVER_URL,e,s).then((function(e){a.online(e),a.setCompanyId(o),i.go("videoCallMobile",{currentUser:e})}))})).catch((function(e){console.log(e)}))}))}),f)}else m()}),p,[v,y])}else if("resume"==e){o.retrieve()?console.log("user continues to use app"):i.go("mainPage")}else i.go("mainPage")}(e):function(e){Branch.initSession().then((function(n){if(n["+clicked_branch_link"]){o.retrieve()&&t.$broadcast("$destroy");var s=c.instant("ASSISTBOX_USAGE_POLICY_TITLE"),u=c.instant("ASSISTBOX_USAGE_POLICY"),p=c.instant("ASSISTBOX_APPROVE"),h=c.instant("ASSISTBOX_DENY");navigator.notification.confirm(u,(function(e){if(1==e){cordova.plugins.phonertc.checkPermissions((function(){var e=n.mobileServiceEndpoint;d.setPath(e);var t=n.mobileStorageEndpoint;d.setStoragePath(t);var s=n.token;o.store(s),(s=o.retrieve())&&r.getDataFromJwtToken(s).then((function(e){var t=e.data.appointmentId,n=e.data.fullName,r=e.data.companyId,o={fullName:n,socket:"",room:t,uuid:g(),companyId:r};l.getConfigurationsByTypeAndCompanyId("SIGNAL_SERVER",r).then((function(e){a.connect(e.data.SIGNAL_SERVER_URL,s,o).then((function(e){a.online(e),a.setCompanyId(r),i.go("videoCallMobile",{currentUser:e})}))})).catch((function(e){console.log(e)}))}))}),f)}else m()}),s,[p,h])}else{if("resume"==e)o.retrieve()?console.log("user continues to use app"):i.go("mainPage");else i.go("mainPage")}})).catch((function(e){var t=c.instant("ASSISTBOX_CONNECTION_ERROR_TITLE"),n=c.instant("ASSISTBOX_CONNECTION_ERROR_MESSAGE"),a=c.instant("ASSISTBOX_CLOSE");navigator.notification.alert(n,null,t,a)}))}(e)}function u(){var e=h("externalSystem");Boolean(!1);return e?"true"==e:Boolean(!1)}function f(){var e=c.instant("ASSISTBOX_PERMISSION_FAILED_TITLE"),t=c.instant("ASSISTBOX_PERMISSION_FAILED"),n=c.instant("ASSISTBOX_CLOSE");navigator.notification.alert(t,null,e,n),i.go("mainPage")}function g(){return"mobile"+Math.random().toString(36).substr(2,9)}function m(){console.log("handle logout"),u()?(console.log("external system"),AssistBoxRedirection.goBackToMainApplication(null,null,null)):(console.log("internal system"),i.go("mainPage"))}function h(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var a=t[n].split("=");if(a[0]==e)return a[1]}}window.cordova&&window.cordova.plugins.Keyboard&&(cordova.plugins.Keyboard.hideKeyboardAccessoryBar(!0),cordova.plugins.Keyboard.disableScroll(!0)),n.nextViewOptions({disableAnimate:!1}),"browser"!=cordova.platformId&&window.StatusBar,t.$on("$ionicView.enter",(function(e,t){"browser"!=cordova.platformId&&window.StatusBar})),e.on("deviceready",(function(){console.log("on app.run deviceready");s("deviceready")})),e.on("resume",(function(){console.log("on app.run resume"),s("resume")})),document.addEventListener("pause",(function(){t.$broadcast("appPaused")}),!1),t.$on("appPaused",(function(e,t){console.log("main page appPaused")}))}))}]),a.directive("videoView",["$rootScope","$timeout",function(e,t){return{restrict:"E",template:'<div class="video-container"></div>',replace:!0,link:function(t,n,a){function r(){var e=sessionStorage.getItem("camera");if(null!=e&&null!=e||(e="Front"),null!=$(".video-container")[0]){var t=$(".clientContent"),a=$(".video-container"),r=Math.floor(.9*window.innerWidth);t.width(r),t.height(Math.floor(window.innerHeight-2*$(".video-container")[0].offsetLeft)),a.width(t.width()),a.height(t.height()),localPositionW=a.width()-110,localPositionH=a.height()-250,cordova.plugins.phonertc.setVideoView({container:n[0],local:{position:[localPositionW,localPositionH],size:[200,200]},camera:e})}}setTimeout(r,2e3),setTimeout(r,2500),setTimeout(r,3e3),e.$on("updateVideoPosition",r())}}}])},function(e,t,n){var a;
/*!
 * angular-translate - v2.18.1 - 2018-05-19
 * 
 * Copyright (c) 2018 The angular-translate team, Pascal Precht; Licensed MIT
 */void 0===(a=function(){return function(){function e(e){"use strict";var t=e.storageKey(),n=e.storage(),a=function(){var a=e.preferredLanguage();angular.isString(a)?e.use(a):n.put(t,e.use())};a.displayName="fallbackFromIncorrectStorageValue",n?n.get(t)?e.use(n.get(t)).catch(a):a():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(e,t,n,a){"use strict";var r,i,o,s,l,c,u,d,p,f,g,m,h,S,v,y,I={},O=[],_=e,A=[],T="translate-cloak",b=!1,k=!1,C=".",E=!1,$=!1,w=0,N=!0,L="default",P={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");switch(n.length){case 1:n[0]=n[0].toLowerCase();break;case 2:n[0]=n[0].toLowerCase(),4===n[1].length?n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase():n[1]=n[1].toUpperCase();break;case 3:n[0]=n[0].toLowerCase(),n[1]=n[1].charAt(0).toUpperCase()+n[1].slice(1).toLowerCase(),n[2]=n[2].toUpperCase();break;default:return t}return n.join("-")},"iso639-1":function(e){return(e||"").split("_").join("-").split("-")[0].toLowerCase()}},B=function(){if(angular.isFunction(a.getLocale))return a.getLocale();var e,n,r=t.$get().navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(r.languages))for(e=0;e<r.languages.length;e++)if((n=r.languages[e])&&n.length)return n;for(e=0;e<i.length;e++)if((n=r[i[e]])&&n.length)return n;return null};B.displayName="angular-translate/service: getFirstBrowserLanguage";var R=function(){var e=B()||"";return P[L]&&(e=P[L](e)),e};R.displayName="angular-translate/service: getLocale";var M=function(e,t){for(var n=0,a=e.length;n<a;n++)if(e[n]===t)return n;return-1},U=function(){return this.toString().replace(/^\s+|\s+$/g,"")},D=function(e){return angular.isString(e)?e.toLowerCase():e},F=function(e){if(e){for(var t,n=[],a=D(e),r=0,o=O.length;r<o;r++)n.push(D(O[r]));if((r=M(n,a))>-1)return O[r];if(i)for(var s in i)if(i.hasOwnProperty(s)){var l=!1,c=Object.prototype.hasOwnProperty.call(i,s)&&D(s)===D(e);if("*"===s.slice(-1)&&(l=D(s.slice(0,-1))===D(e.slice(0,s.length-1))),(c||l)&&(t=i[s],M(n,D(t))>-1))return t}var u=e.split("_");return u.length>1&&M(n,D(u[0]))>-1?u[0]:void 0}},X=function(e,t){if(!e&&!t)return I;if(e&&!t){if(angular.isString(e))return I[e]}else angular.isObject(I[e])||(I[e]={}),angular.extend(I[e],j(t));return this};this.translations=X,this.cloakClassName=function(e){return e?(T=e,this):T},this.nestedObjectDelimeter=function(e){return e?(C=e,this):C};var j=function(e,t,n,a){var r,i,o;for(r in t||(t=[]),n||(n={}),e)Object.prototype.hasOwnProperty.call(e,r)&&(o=e[r],angular.isObject(o)?j(o,t.concat(r),n,r):(i=t.length?""+t.join(C)+C+r:r,t.length&&r===a&&(n[""+t.join(C)]="@:"+i),n[i]=o));return n};j.displayName="flatObject",this.addInterpolation=function(e){return A.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return f=e,this},this.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},this.preferredLanguage=function(e){return e?(z(e),this):r};var z=function(e){return e&&(r=e),r};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(h=e,this):h},this.translationNotFoundIndicatorRight=function(e){return e?(S=e,this):S},this.fallbackLanguage=function(e){return x(e),this};var x=function(e){return e?(angular.isString(e)?(s=!0,o=[e]):angular.isArray(e)&&(s=!1,o=e),angular.isString(r)&&M(o,r)<0&&o.push(r),this):s?o[0]:o};this.use=function(e){if(e){if(!I[e]&&!g)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return l=e,this}return l},this.resolveClientLocale=function(){return R()};var H=function(e){return e?(_=e,this):d?d+_:_};this.storageKey=H,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return g=e,m=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return u=e,this},this.storagePrefix=function(e){return e?(d=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return p=e,this},this.usePostCompiling=function(e){return b=!!e,this},this.forceAsyncReload=function(e){return k=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},L=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():R();return r=O.length&&F(t)||t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(O=e,t&&(i=t),this):O},this.useLoaderCache=function(e){return!1===e?v=void 0:!0===e?v=!0:void 0===e?v="$translationCache":e&&(v=e),this},this.directivePriority=function(e){return void 0===e?w:(w=e,this)},this.statefulFilter=function(e){return void 0===e?N:(N=e,this)},this.postProcess=function(e){return y=e||void 0,this},this.keepContent=function(e){return $=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,n,a){var i,d,L,P=t.get(f||"$translateDefaultInterpolation"),B=!1,D={},Y={},V=function(e,t,n,s,c,p){!l&&r&&(l=r);var f=c&&c!==l?F(c)||c:l;if(c&&ie(c),angular.isArray(e))return function(e){for(var r={},i=[],o=function(e){var i=a.defer(),o=function(t){r[e]=t,i.resolve([e,t])};return V(e,t,n,s,c,p).then(o,o),i.promise},l=0,u=e.length;l<u;l++)i.push(o(e[l]));return a.all(i).then((function(){return r}))}(e);var g=a.defer();e&&(e=U.apply(e));var m=function(){var e=Y[f]||Y[r];if(d=0,u&&!e){var t=i.get(_);if(e=Y[t],o&&o.length){var n=M(o,t);d=0===n?1:0,M(o,r)<0&&o.push(r)}}return e}();if(m){var h=function(){c||(f=l),ne(e,t,n,s,f,p).then(g.resolve,g.reject)};h.displayName="promiseResolved",m.finally(h).catch(angular.noop)}else ne(e,t,n,s,f,p).then(g.resolve,g.reject);return g.promise},G=function(e){return h&&(e=[h,e].join(" ")),S&&(e=[e,S].join(" ")),e},W=function(e){l=e,u&&i.put(V.storageKey(),l),n.$emit("$translateChangeSuccess",{language:e}),P.setLocale(l);var t=function(e,t){D[t].setLocale(l)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(D,t),n.$emit("$translateChangeEnd",{language:e})},K=function(e){if(!e)throw"No language key specified for loading.";var r=a.defer();n.$emit("$translateLoadingStart",{language:e}),B=!0;var i=v;"string"==typeof i&&(i=t.get(i));var o=angular.extend({},m,{key:e,$http:angular.extend({},{cache:i},m.$http)}),s=function(t){var a={};n.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,(function(e){angular.extend(a,j(e))})):angular.extend(a,j(t)),B=!1,r.resolve({key:e,table:a}),n.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var l=function(e){n.$emit("$translateLoadingError",{language:e}),r.reject(e),n.$emit("$translateLoadingEnd",{language:e})};return l.displayName="onLoaderError",t.get(g)(o).then(s,l),r.promise};if(u&&(!(i=t.get(u)).get||!i.put))throw new Error("Couldn't use storage '"+u+"', missing get() or put() method!");if(A.length){var q=function(e){var n=t.get(e);n.setLocale(r||l),D[n.getInterpolationIdentifier()]=n};q.displayName="interpolationFactoryAdder",angular.forEach(A,q)}var J=function(e,t,n,r,i){var o=a.defer(),s=function(a){if(Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){r.setLocale(e);var s=a[t];if("@:"===s.substr(0,2))J(e,s.substr(2),n,r,i).then(o.resolve,o.reject);else{var c=r.interpolate(a[t],n,"service",i,t);c=re(t,a[t],c,n,e),o.resolve(c)}r.setLocale(l)}else o.reject()};return s.displayName="fallbackTranslationResolver",function(e){var t=a.defer();if(Object.prototype.hasOwnProperty.call(I,e))t.resolve(I[e]);else if(Y[e]){var n=function(e){X(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",Y[e].then(n,t.reject)}else t.reject();return t.promise}(e).then(s,o.reject),o.promise},Q=function(e,t,n,a,r){var i,o=I[e];if(o&&Object.prototype.hasOwnProperty.call(o,t)&&null!==o[t]){if(a.setLocale(e),i=a.interpolate(o[t],n,"filter",r,t),i=re(t,o[t],i,n,e,r),!angular.isString(i)&&angular.isFunction(i.$$unwrapTrustedValue)){var s=i.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return Q(e,s.substr(2),n,a,r)}else if("@:"===i.substr(0,2))return Q(e,i.substr(2),n,a,r);a.setLocale(l)}return i},Z=function(e,n,a,r){return p?t.get(p)(e,l,n,a,r):e},ee=function(e,t,n,r,i,s){var l=a.defer();if(e<o.length){var c=o[e];J(c,t,n,r,s).then((function(e){l.resolve(e)}),(function(){return ee(e+1,t,n,r,i,s).then(l.resolve,l.reject)}))}else if(i)l.resolve(i);else{var u=Z(t,n,i);p&&u?l.resolve(u):l.reject(G(t))}return l.promise},te=function(e,t,n,a,r){var i;if(e<o.length){var s=o[e];(i=Q(s,t,n,a,r))||""===i||(i=te(e+1,t,n,a))}return i},ne=function(e,t,n,r,i,s){var l=a.defer(),c=i?I[i]:I,u=n?D[n]:P;if(c&&Object.prototype.hasOwnProperty.call(c,e)&&null!==c[e]){var f=c[e];if("@:"===f.substr(0,2))V(f.substr(2),t,n,r,i,s).then(l.resolve,l.reject);else{var g=u.interpolate(f,t,"service",s,e);g=re(e,f,g,t,i),l.resolve(g)}}else{var m;p&&!B&&(m=Z(e,t,r)),i&&o&&o.length?function(e,t,n,a,r){return ee(L>0?L:d,e,t,n,a,r)}(e,t,u,r,s).then((function(e){l.resolve(e)}),(function(e){l.reject(G(e))})):p&&!B&&m?r?l.resolve(r):l.resolve(m):r?l.resolve(r):l.reject(G(e))}return l.promise},ae=function(e,t,n,a,r){var i,s=a?I[a]:I,l=P;if(D&&Object.prototype.hasOwnProperty.call(D,n)&&(l=D[n]),s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){var c=s[e];"@:"===c.substr(0,2)?i=ae(c.substr(2),t,n,a,r):(i=l.interpolate(c,t,"filter",r,e),i=re(e,c,i,t,a,r))}else{var u;p&&!B&&(u=Z(e,t,r)),a&&o&&o.length?(d=0,i=function(e,t,n,a){return te(L>0?L:d,e,t,n,a)}(e,t,l,r)):i=p&&!B&&u?u:G(e)}return i},re=function(e,n,a,r,i,o){var s=y;return s&&("string"==typeof s&&(s=t.get(s)),s)?s(e,n,a,r,i,o):a},ie=function(e){I[e]||!g||Y[e]||(Y[e]=K(e).then((function(e){return X(e.key,e.table),e})))};V.preferredLanguage=function(e){return e&&z(e),r},V.cloakClassName=function(){return T},V.nestedObjectDelimeter=function(){return C},V.fallbackLanguage=function(e){if(null!=e){if(x(e),g&&o&&o.length)for(var t=0,n=o.length;t<n;t++)Y[o[t]]||(Y[o[t]]=K(o[t]));V.use(V.use())}return s?o[0]:o},V.useFallbackLanguage=function(e){if(null!=e)if(e){var t=M(o,e);t>-1&&(L=t)}else L=0},V.proposedLanguage=function(){return c},V.storage=function(){return i},V.negotiateLocale=F,V.use=function(e){if(!e)return l;var t=a.defer();t.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:e});var r=F(e);return O.length>0&&!r?a.reject(e):(r&&(e=r),c=e,!k&&I[e]||!g||Y[e]?Y[e]?Y[e].then((function(e){return c===e.key&&W(e.key),t.resolve(e.key),e}),(function(e){return!l&&o&&o.length>0&&o[0]!==e?V.use(o[0]).then(t.resolve,t.reject):t.reject(e)})):(t.resolve(e),W(e)):(Y[e]=K(e).then((function(n){return X(n.key,n.table),t.resolve(n.key),c===e&&W(n.key),n}),(function(e){return n.$emit("$translateChangeError",{language:e}),t.reject(e),n.$emit("$translateChangeEnd",{language:e}),a.reject(e)})),Y[e].finally((function(){!function(e){c===e&&(c=void 0),Y[e]=void 0}(e)})).catch(angular.noop)),t.promise)},V.resolveClientLocale=function(){return R()},V.storageKey=function(){return H()},V.isPostCompilingEnabled=function(){return b},V.isForceAsyncReloadEnabled=function(){return k},V.isKeepContent=function(){return $},V.refresh=function(e){if(!g)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:e});var t=a.defer(),r={};function i(e){var t=K(e);return Y[e]=t,t.then((function(t){I[e]={},X(e,t.table),r[e]=!0}),angular.noop),t}if(t.promise.then((function(){for(var e in I)I.hasOwnProperty(e)&&(e in r||delete I[e]);l&&W(l)}),angular.noop).finally((function(){n.$emit("$translateRefreshEnd",{language:e})})),e)I[e]?i(e).then(t.resolve,t.reject):t.reject();else{var s=o&&o.slice()||[];l&&-1===s.indexOf(l)&&s.push(l),a.all(s.map(i)).then(t.resolve,t.reject)}return t.promise},V.instant=function(e,t,n,a,i){var s=a&&a!==l?F(a)||a:l;if(null===e||angular.isUndefined(e))return e;if(a&&ie(a),angular.isArray(e)){for(var c={},u=0,d=e.length;u<d;u++)c[e[u]]=V.instant(e[u],t,n,a,i);return c}if(angular.isString(e)&&e.length<1)return e;e&&(e=U.apply(e));var f,g,m=[];r&&m.push(r),s&&m.push(s),o&&o.length&&(m=m.concat(o));for(var v=0,y=m.length;v<y;v++){var O=m[v];if(I[O]&&void 0!==I[O][e]&&(f=ae(e,t,n,s,i)),void 0!==f)break}return f||""===f||(h||S?f=G(e):(f=P.interpolate(e,t,"filter",i),p&&!B&&(g=Z(e,t,i)),p&&!B&&g&&(f=g))),f},V.versionInfo=function(){return"2.18.1"},V.loaderCache=function(){return v},V.directivePriority=function(){return w},V.statefulFilter=function(){return N},V.isReady=function(){return E};var oe=a.defer();oe.promise.then((function(){E=!0})),V.onReady=function(e){var t=a.defer();return angular.isFunction(e)&&t.promise.then(e),E?t.resolve():oe.promise.then(t.resolve),t.promise},V.getAvailableLanguageKeys=function(){return O.length>0?O:null},V.getTranslationTable=function(e){return(e=e||V.use())&&I[e]?angular.copy(I[e]):null};var se=n.$on("$translateReady",(function(){oe.resolve(),se(),se=null})),le=n.$on("$translateChangeEnd",(function(){oe.resolve(),le(),le=null}));if(g){if(angular.equals(I,{})&&V.use()&&V.use(V.use()),o&&o.length)for(var ce=function(e){return X(e.key,e.table),n.$emit("$translateChangeEnd",{language:e.key}),e},ue=0,de=o.length;ue<de;ue++){var pe=o[ue];!k&&I[pe]||(Y[pe]=K(pe).then(ce))}}else n.$emit("$translateReady",{language:V.use()});return V}]}function n(e,t){"use strict";var n={setLocale:function(e){},getInterpolationIdentifier:function(){return"default"},useSanitizeValueStrategy:function(e){return t.useStrategy(e),this},interpolate:function(n,a,r,i,o){var s;return a=a||{},a=t.sanitize(a,"params",i,r),angular.isNumber(n)?s=""+n:angular.isString(n)?(s=e(n)(a),s=t.sanitize(s,"text",i,r)):s="",s}};return n}function a(e,t,n,a,r){"use strict";var i=function(){return this.toString().replace(/^\s+|\s+$/g,"")},o=function(e){return angular.isString(e)?e.toLowerCase():e};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(s,l){var c=l.translateValues?l.translateValues:void 0,u=l.translateInterpolation?l.translateInterpolation:void 0,d=l.translateSanitizeStrategy?l.translateSanitizeStrategy:void 0,p=s[0].outerHTML.match(/translate-value-+/i),f="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",g="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(s,m,h){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=function e(t){return t.translateNamespace?t.translateNamespace:t.$parent?e(t.$parent):void 0}(s);var S={},v=function(e){if(angular.isFunction(v._unwatchOld)&&(v._unwatchOld(),v._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var n=i.apply(m.text()),a=n.match(f);if(angular.isArray(a)){s.preText=a[1],s.postText=a[3],S.translate=t(a[2])(s.$parent);var r=n.match(g);angular.isArray(r)&&r[2]&&r[2].length&&(v._unwatchOld=s.$watch(r[2],(function(e){S.translate=e,T()})))}else S.translate=n||void 0}else S.translate=e;T()},y=function(e){h.$observe(e,(function(t){S[e]=t,T()}))};!function(e,t,n){if(t.translateValues&&angular.extend(e,a(t.translateValues)(s.$parent)),p)for(var r in n)Object.prototype.hasOwnProperty.call(t,r)&&"translateValue"===r.substr(0,14)&&"translateValues"!==r&&(e[o(r.substr(14,1))+r.substr(15)]=n[r])}(s.interpolateParams,h,l);var I=!0;for(var O in h.$observe("translate",(function(e){void 0===e?v(""):""===e&&I||(S.translate=e,T()),I=!1})),h)h.hasOwnProperty(O)&&"translateAttr"===O.substr(0,13)&&O.length>13&&y(O);if(h.$observe("translateDefault",(function(e){s.defaultText=e,T()})),d&&h.$observe("translateSanitizeStrategy",(function(e){s.sanitizeStrategy=a(e)(s.$parent),T()})),c&&h.$observe("translateValues",(function(e){e&&s.$parent.$watch((function(){angular.extend(s.interpolateParams,a(e)(s.$parent))}))})),p){var _=function(e){h.$observe(e,(function(t){var n=o(e.substr(14,1))+e.substr(15);s.interpolateParams[n]=t}))};for(var A in h)Object.prototype.hasOwnProperty.call(h,A)&&"translateValue"===A.substr(0,14)&&"translateValues"!==A&&_(A)}var T=function(){for(var e in S)S.hasOwnProperty(e)&&void 0!==S[e]&&b(e,S[e],s,s.interpolateParams,s.defaultText,s.translateNamespace)},b=function(t,n,a,r,i,o){n?(o&&"."===n.charAt(0)&&(n=o+n),e(n,r,u,i,a.translateLanguage,a.sanitizeStrategy).then((function(e){k(e,a,!0,t)}),(function(e){k(e,a,!1,t)}))):k(n,a,!1,t)},k=function(t,a,r,i){if(r||void 0!==a.defaultText&&(t=a.defaultText),"translate"===i){(r||!r&&!e.isKeepContent()&&void 0===h.translateKeepContent)&&m.empty().append(a.preText+t+a.postText);var o=e.isPostCompilingEnabled(),s=void 0!==l.translateCompile,c=s&&"false"!==l.translateCompile;(o&&!s||c)&&n(m.contents())(a)}else{var u=h.$attr[i];"data-"===u.substr(0,5)&&(u=u.substr(5)),u=u.substr(15),m.attr(u,t)}};(c||p||h.translateDefault)&&s.$watch("interpolateParams",T,!0),s.$on("translateLanguageChanged",T);var C=r.$on("$translateChangeSuccess",T);m.text().length?h.translate?v(h.translate):v(""):h.translate&&v(h.translate),T(),s.$on("$destroy",C)}}}}function r(e,t){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(n,a,r){var o,s,l,c={},u=function(){angular.forEach(o,(function(t,i){t&&(c[i]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),e(t,s,r.translateInterpolation,void 0,n.translateLanguage,l).then((function(e){a.attr(i,e)}),(function(e){a.attr(i,e)})))})),angular.forEach(c,(function(e,t){o[t]||(a.removeAttr(t),delete c[t])}))};i(n,r.translateAttr,(function(e){o=e}),u),i(n,r.translateValues,(function(e){s=e}),u),i(n,r.translateSanitizeStrategy,(function(e){l=e}),u),r.translateValues&&n.$watch(r.translateValues,u,!0),n.$on("translateLanguageChanged",u);var d=t.$on("$translateChangeSuccess",u);u(),n.$on("$destroy",d)}}}function i(e,t,n,a){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,(function(e){n(e),a()}),!0),n(e.$eval(t)))}function o(e,t){"use strict";return{compile:function(n){var a=function(t){t.addClass(e.cloakClassName())},r=function(t){t.removeClass(e.cloakClassName())};return a(n),function(n,i,o){var s=r.bind(this,i),l=a.bind(this,i);o.translateCloak&&o.translateCloak.length?(o.$observe("translateCloak",(function(t){e(t).then(s,l)})),t.$on("$translateChangeSuccess",(function(){e(o.translateCloak).then(s,l)}))):e.onReady(s)}}}}function s(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=function e(t){return t.translateNamespace?t.translateNamespace:t.$parent?e(t.$parent):void 0}(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function l(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",(function(t){e.translateLanguage=t})),e.$watch("translateLanguage",(function(){e.$broadcast("translateLanguageChanged")}))}}}}function c(e,t){"use strict";var n=function(n,a,r,i){if(!angular.isObject(a)){var o=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};a=e(a)(o)}return t.instant(n,a,r,i)};return t.statefulFilter()&&(n.$stateful=!0),n}function u(e){"use strict";return e("translations")}return e.$inject=["$translate"],t.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],n.$inject=["$interpolate","$translateSanitization"],a.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],r.$inject=["$translate","$rootScope"],o.$inject=["$translate","$rootScope"],c.$inject=["$parse","$translate"],u.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",(function(){"use strict";var e,t,n,a=null,r=!1,i=!1;(n={sanitize:function(e,t){return"text"===t&&(e=s(e)),e},escape:function(e,t){return"text"===t&&(e=o(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=c(e,s)),e},escapeParameters:function(e,t){return"params"===t&&(e=c(e,o)),e},sce:function(e,t,n){return"text"===t?e=l(e):"params"===t&&"filter"!==n&&(e=c(e,o)),e},sceParameters:function(e,t){return"params"===t&&(e=c(e,l)),e}}).escaped=n.escapeParameters,this.addStrategy=function(e,t){return n[e]=t,this},this.removeStrategy=function(e){return delete n[e],this},this.useStrategy=function(e){return r=!0,a=e,this},this.$get=["$injector","$log",function(o,s){var l,c={};return o.has("$sanitize")&&(e=o.get("$sanitize")),o.has("$sce")&&(t=o.get("$sce")),{useStrategy:(l=this,function(e){l.useStrategy(e)}),sanitize:function(e,t,l,u){return a||r||i||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),i=!0),l||null===l||(l=a),l?(u||(u="service"),function(e,t,a,r){return angular.forEach(r,(function(r){if(angular.isFunction(r))e=r(e,t,a);else if(angular.isFunction(n[r]))e=n[r](e,t,a);else{if(!angular.isString(n[r]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'");if(!c[n[r]])try{c[n[r]]=o.get(n[r])}catch(e){throw c[n[r]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+r+"'")}e=c[n[r]](e,t,a)}})),e}(e,t,u,angular.isArray(l)?l:[l])):e}}}];var o=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},s=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},l=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return t.trustAsHtml(e)},c=function(e,t,n){if(angular.isDate(e))return e;if(angular.isObject(e)){var a=angular.isArray(e)?[]:{};if(n){if(n.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(e),angular.forEach(e,(function(e,r){angular.isFunction(e)||(a[r]=c(e,t,n))})),n.splice(-1,1),a}return angular.isNumber(e)?e:!0===e||!1===e?e:angular.isUndefined(e)||null===e?e:t(e)}})),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",t),t.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",n),n.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",a),a.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",r),r.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",o),o.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",s),s.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",l),l.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",c),c.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",u),u.displayName="$translationCache","pascalprecht.translate"}()}.apply(t,[]))||(e.exports=a)},function(e,t,n){"use strict";e.exports=function(){return{store:function(e){return localStorage.setItem("user_token",e)},retrieve:function(){return localStorage.getItem("user_token")},clear:function(){return localStorage.removeItem("user_token")}}}},function(e,t,n){"use strict";e.exports=function(){return{store:function(e,t){return localStorage.setItem(e,t)},retrieve:function(e){return localStorage.getItem(e)},remove:function(e){return localStorage.removeItem(e)},getAndRemove:function(e){var t=localStorage.getItem(e);return localStorage.removeItem(e),t}}}},function(e,t,n){"use strict";function a(e,t,n){return{request:function(e){var t=n.retrieve();return t&&(e.headers.Auth="Bearer "+t),e},response:function(e){return e&&e.headers&&e.headers("Auth")&&n.store(e.headers("Auth")),e},responseError:function(t){return 401!==t.status&&403!==t.status||console.log(t.status),e.reject(t)}}}a.$inject=["$q","$injector","TokenStorage"],e.exports=a},function(e,t,n){"use strict";e.exports=function(){return{setPath:function(e){localStorage.setItem("mobileServiceEndpoint",e)},setStoragePath:function(e){localStorage.setItem("mobileStorageEndpoint",e)},getPath:function(){return localStorage.getItem("mobileServiceEndpoint")},getStoragePath:function(){return localStorage.getItem("mobileStorageEndpoint")}}}},function(e,t){function n(e,t,n,a){var r=a.getPath();this.searchAppointment=function(n){var a=e.defer();return t({method:"post",url:r+"/rest/api/appointmentService/searchAppointment",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){a.resolve(e)}),(function(e){a.reject(e)})),a.promise},this.createAppointmentWithClaimId=function(n){var a=e.defer();return t({method:"post",url:r+"/rest/api/appointmentService/createAppointmentWithClaimId",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){a.resolve(e)}),(function(e){a.reject(e)})),a.promise},this.getAppointmentById=function(n){var r=a.getPath(),i=e.defer();return t({method:"get",url:r+"/rest/api/appointmentService/"+n}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise}}n.$inject=["$q","$http","TokenStorage","ServicePath"],e.exports=n},function(e,t){function n(e,t,n){var a=n.getPath();this.createAppointmentDeviceInfo=function(n){var r=e.defer();return t({method:"post",url:a+"/rest/api/appointmentDeviceInfoService",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){r.resolve(e)}),(function(e){r.reject(e)})),r.promise}}n.$inject=["$q","$http","ServicePath"],e.exports=n},function(e,t){function n(e,t,n,a){this.getBinaryById=function(a){var r=n.getPath(),i=e.defer();return t({method:"get",url:r+"/rest/api/fileService/getBinaryById/"+a}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},this.getBinaryByIdWithoutDownload=function(a){var r=n.getPath(),i=e.defer();return t({method:"get",url:r+"/rest/api/fileService/withoutDownload/"+a}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise};var r=function(){var a=n.getPath(),r=e.defer();return t({method:"GET",url:a+"/rest/api/fileService/chunkSize",headers:{HideLoadingBar:!0}}).then((function(e){r.resolve(e)}),(function(e){r.reject(e)})),r.promise};this.getChunkSize=function(){return new Promise(e=>{r().then(t=>{e(t.data)})})},this.createChunkedAppointmentBinaryFile=function(e,t,a,o){return new Promise(s=>{r().then(r=>{let l=Math.ceil(a.size/r.data);var c=n.getPath()+"/rest/api/fileService/createChunkedAppointmentBinaryFile/"+e+"/"+t;const u=new Array(l).fill().map((e,t)=>t).reverse();var d=Math.random().toString(36).substr(2,9);i(d,c,u,a,o,r.data).then(e=>{s(e)})})})};var i=function(e,t,n,r,o,s,l){return new Promise((c,u)=>{if(!n.length)return console.log("All parts uploaded"),void c(l);const d=n.pop(),p=d*s,f=r.slice(p,p+s);(function(e,t,n,r,i,o,s){return new Promise((l,c)=>{const u=new XMLHttpRequest;u.open("PUT",n);const d=i*s;u.setRequestHeader("Content-Type",o.type),u.setRequestHeader("Content-Range","byte "+d+"-"+d+s+"/"+o.size),u.setRequestHeader("Auth",a.retrieve()),u.setRequestHeader("X-Chunk-Id",i),u.setRequestHeader("X-Chunk-Size",s),u.setRequestHeader("X-Remaining-Chunk-Count",e),u.setRequestHeader("X-Content-Id",t),u.setRequestHeader("X-Content-Length",o.size),u.setRequestHeader("X-Content-Name",o.name),function(e){return new Promise((t,n)=>{const a=new FileReader;a.onload=e=>{var n=a.result.indexOf(","),r=a.result.substr(n+1);t(r)},a.readAsDataURL(e),a.onerror=e=>n(e)})}(r).then(e=>{u.send(e)}),u.onreadystatechange=()=>{4===u.readyState&&200===u.status&&(u.response?l({chunkId:i,appointmentBinary:JSON.parse(u.response)}):l({chunkId:i}))},u.onerror=c})})(n.length,e,t,f,d,r,s).then(a=>{o&&o(a.chunkId+1),c(i(e,t,n,r,o,s,a.appointmentBinary))}).catch(()=>{n.push(d)})})}}n.$inject=["$q","$http","ServicePath","TokenStorage"],e.exports=n},function(e,t){function n(e,t,n,a){this.getTokenAsJson=function(){if(null==n.retrieve())return null;var e=n.retrieve();e&&this.getDataFromJwtToken(e).then((function(e){return e}))},this.getDataFromJwtToken=function(n){var r=a.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/api/userService/getDataFromJwtToken",data:n,headers:{"Content-Type":"text/plain"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},this.updateUserDeviceInfo=function(n){var r=a.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/api/userService/updateUserDeviceInfo",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},this.sendNotification=function(n){var r=a.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/api/userService/sendNotification",data:n,headers:{"Content-Type":"application/json"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise}}n.$inject=["$q","$http","TokenStorage","ServicePath"],e.exports=n},function(e,t){function n(e,t,n){this.createConfiguration=function(a){var r=n.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/api/configurationService/createConfiguration",data:a,headers:{"Content-Type":"application/json"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},this.updateConfiguration=function(a){var r=n.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/api/configurationService/updateConfiguration",data:a,headers:{"Content-Type":"application/json"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},this.removeConfiguration=function(a){var r=n.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/api/configurationService/removeConfiguration",data:a,headers:{"Content-Type":"application/json"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise},this.getConfigurationsByTypeAndCompanyId=function(a,r){var i=n.getPath(),o={type:a,companyId:r},s=e.defer();return t({method:"post",url:i+"/rest/api/configurationService/getConfigurationsByTypeAndCompanyId",data:o,headers:{"Content-Type":"application/json"}}).then((function(e){s.resolve(e)}),(function(e){s.reject(e)})),s.promise},this.getConfigurationByKeyAndCompanyId=function(a,r){var i=n.getPath(),o={type,companyId:r},s=e.defer();return t({method:"post",url:i+"/rest/api/configurationService/getConfigurationByKeyAndCompanyId",data:o,headers:{"Content-Type":"application/json"}}).then((function(e){s.resolve(e)}),(function(e){s.reject(e)})),s.promise}}n.$inject=["$q","$http","ServicePath"],e.exports=n},function(e,t){function n(e,t,n,a,r,i,o,s,l,c,u){var d=null;this.contacts={},this.duplicateMessages={},this.callInProgress=!1,this.isCalling=!1,this.hideFromContactList=[],this.endCallInitiatior=!1,this.onlineUsers=[],this.currentUser={},this.companyId=null,this.updateVideoPosition=function(){n.$broadcast("updateVideoPosition")};var p=this;function f(e,t){c.getConfigurationsByTypeAndCompanyId("TURN",p.companyId).then((function(a){console.log((new Date).toString()+": calling to "+t.fullName+", isInitiator: "+e);var r={isInitiator:e,turn:{host:a.data.TURN_URL,username:a.data.TURN_USER_NAME,password:a.data.TURN_PASSWORD},streams:{audio:!0,video:!0}},i=new cordova.plugins.phonertc.Session(r);i.on("sendMessage",(function(e){d.emit("sendMessage",t,{type:"phonertc_handshake",data:window.btoa(JSON.stringify(e)),encoded:!0})})),i.on("answer",(function(){console.log("Answered!")})),i.on("disconnect",(function(){if(console.log("session on disconnect"),p.contacts[t.socket]){var e=p.hideFromContactList.map((function(e){return e.socket})).indexOf(t.socket);e>-1&&p.hideFromContactList.splice(e,1),delete p.contacts[t.socket]}0===Object.keys(p.contacts).length&&setTimeout((function(){d.emit("sendMessage",t,{type:"ignore"})}),1e3),p.endCallInitiatior||(p.callInProgress=!1,p.duplicateMessages={},n.$broadcast("$destroy")),p.endCallInitiatior=!1})),i.call(),p.contacts[t.socket]=i}))}function g(e,a){switch(a.type){case"call":p.isCalling||p.callInProgress?d.emit("sendMessage",e,{type:"busy"}):($("#clientIonContent").append(s("<video-view></video-view>")(n)),t((function(){p.answerCall(e),n.$broadcast("callAnswered")}),1e3));break;case"answer":p.callInProgress=!0,p.isCalling=!1,clearTimeout(n.sendingCallTimeCounterIntervalId),n.$broadcast("answerCall",e);var r=Object.keys(p.contacts);0!==r.length&&d.emit("sendMessage",e,{type:"add_to_group",contacts:r,isInitiator:!1}),t(p.updateVideoPosition(),1e3),f(!0,e);break;case"busy":p.isCalling=!1,(i=p.hideFromContactList.indexOf(e.socket))>-1&&p.hideFromContactList.splice(i,1),n.$broadcast("showBusyToastr",e);break;case"ignore":var i;console.log("ignore"),(i=p.hideFromContactList.indexOf(e.socket))>-1&&p.hideFromContactList.splice(i,1),Object.keys(p.contacts).length>0&&p.contacts[e.socket]&&(p.contacts[e.socket].close(),delete p.contacts[e.socket]),p.callInProgress||p.isCalling&&n.$broadcast("ignoreCallInfo",e),p.isCalling=!1;break;case"phonertc_handshake":if(a.encoded){var o=a.data;console.log("phonertc_handshake encoded message data = "+o);var c=window.atob(o);console.log("phonertc_handshake decoded message data = "+c),a.data=c}if(p.duplicateMessages[e.socket]||"bye"==a.type||(p.duplicateMessages[e.socket]=[]),-1===p.duplicateMessages[e.socket].indexOf(a.data))p.contacts[e.socket].receiveMessage(JSON.parse(a.data)),p.duplicateMessages[e.socket].push(a.data),"bye"==JSON.parse(a.data).type&&delete p.duplicateMessages[e.socket];break;case"add_to_group":a.contacts.forEach((function(e){p.hideFromContactList.push(e),f(a.isInitiator,e),a.isInitiator||t((function(){d.emit("sendMessage",e,{type:"add_to_group",contacts:[p.currentUser],isInitiator:!0})}),1500),n.$broadcast("addToGroup",e)}));break;case"position":var u=function(e){var t={lat:e.coords.latitude,lng:e.coords.longitude};d.emit("sendMessage",a.requester,{type:"positionCallBack",currentPos:t})};function g(e){console.log(e),d.emit("sendMessage",a.requester,{type:"positionCallBack",error:e})}var m=l.use();"android"==cordova.platformId?cordova.plugins.locationServices.geolocation.getCurrentPosition(u,g,{lang:m}):navigator.geolocation.getCurrentPosition(u,g);break;case"positionCallBack":n.$broadcast("positionSuccessCallBack",{currentPos:a.currentPos});break;case"cameraFlashOff":var h=function(e){d.emit("sendMessage",a.requester,{type:"cameraFlashOffError",error:e})};"Back"==sessionStorage.getItem("camera")?window.plugins.flashlight.switchOff((function(){d.emit("sendMessage",a.requester,{type:"cameraFlashOffSuccess"})}),h):h("front_cam_error");break;case"cameraFlashOn":var S=function(e){d.emit("sendMessage",a.requester,{type:"cameraFlashOnError",error:e})};"Back"==sessionStorage.getItem("camera")?window.plugins.flashlight.switchOn((function(){d.emit("sendMessage",a.requester,{type:"cameraFlashOnSuccess"})}),S):S("front_cam_error");break;case"chatMessage":n.$broadcast("chatMessage",{messageData:a.messageData});break;case"triggerRemoteAction":a.remoteActionRequest.type;n.$broadcast("triggerRemoteAction",{remoteActionRequestMessage:a.remoteActionRequest,callBack:function(e){d.emit("sendMessage",a.requester,{type:"triggerRemoteActionResult",remoteActionResult:e})}})}}this.sendCallSignal=function(e){p.isCalling=!0,d.emit("sendMessage",e,{type:"call"})},this.sendPositionSignal=function(e){d.emit("sendMessage",e,{type:"position",requester:p.currentUser})},this.cameraFlashOff=function(e){d.emit("sendMessage",e,{type:"cameraFlashOff",requester:p.currentUser})},this.cameraFlashOn=function(e){d.emit("sendMessage",e,{type:"cameraFlashOn",requester:p.currentUser})},this.ignoreCall=function(e){var t=Object.keys(p.contacts);t.length>0?p.contacts[t[0]].disconnect():d.emit("sendMessage",contactName,{type:"ignore"})},this.endCall=function(){console.log("end call"),p.endCallInitiatior=!0,p.callInProgress=!1,p.duplicateMessages={},Object.keys(p.contacts).forEach((function(e){p.contacts[e].close(),delete p.contacts[e]}))},this.answerCall=function(e){p.callInProgress||(p.callInProgress=!0,t((function(){p.updateVideoPosition()}),1e3),f(!1,e),setTimeout((function(){console.log("sending answer"),d.emit("sendMessage",e,{type:"answer"}),$(".loading").remove(),$(".loadingSpan").remove()}),1500))},this.setOnlineUsers=function(e,t){p.onlineUsers.length=0,e.forEach((function(e){e.uuid!==t.uuid?p.onlineUsers.push(e):n.$broadcast("updateCurrentUserSocket",e.socket)}))},this.setCompanyId=function(e){p.companyId=e},this.connect=function(e,a,r){var i=u.defer();console.log("before connect");var o={transports:["websocket"],reconnection:!1,roomName:r.room,forceNew:!0};if(d&&d.disconnected)try{d=io.connect(e,o)}catch(e){console.log(e)}else d&&d.connected?(r.socket=d.io.engine.id,p.currentUser=r,n.$broadcast("updateCurrentUserSocket",p.currentUser.socket),t((function(){i.resolve(p.currentUser)}),500)):d=io.connect(e,o);return d.on("online",(function(e){-1===p.onlineUsers.map((function(e){return e.socket})).indexOf(e.socket)&&e.socket!==p.currentUser.socket&&(p.onlineUsers.push(e),n.$broadcast("onlineUser",e))})),d.on("offline",(function(e){var t=p.onlineUsers.map((function(e){return e.socket})).indexOf(e.socket);-1!==t&&(p.onlineUsers.splice(t,1),n.$broadcast("offlineUser",e)),p.contacts[e.socket]&&(p.contacts[e.socket].close(),delete p.contacts[e.socket]),0===Object.keys(p.contacts).length&&(d.emit("sendMessage",e,{type:"ignore"}),p.callInProgress=!1),p.updateVideoPosition(),p.contacts[e.socket]&&(p.contacts[e.socket].close(),delete p.contacts[e.socket])})),d.on("connect",(function(){console.log("socket connected = "+d.connected),d.connected?(console.log("socket.io.engine.id = "+d.io.engine.id),r.socket=d.io.engine.id,p.currentUser=r,n.$broadcast("updateCurrentUserSocket",p.currentUser.socket),i.resolve(p.currentUser)):i.reject()})),d.on("users_in_room",(function(e){p.setOnlineUsers(e,p.currentUser)})),d.on("connect_error",(function(e){console.log("socket connection error = "+e),i.reject()})),d.on("error",(function(e){console.log("socket error = "+e),i.reject()})),d.on("reconnect_attempt",(function(){console.log("reconnect attempt"),d.io.opts.transports=["websocket"]})),d.on("messageReceived",g),i.promise},this.removeListeners=function(){d.removeAllListeners("messageReceived"),d.removeAllListeners("reconnect_attempt"),d.removeAllListeners("error"),d.removeAllListeners("connect_error"),d.removeAllListeners("users_in_room"),d.removeAllListeners("connect"),d.removeAllListeners("online"),d.removeAllListeners("offline"),d.removeAllListeners("login_successful"),d.removeAllListeners("login_error"),d.removeAllListeners("disconnect")},this.joinRoom=function(e){d.emit("join_room",e,(function(e){})),console.log("socket joined room: "+e)},this.leaveRoom=function(e){d.emit("leave_room",e)},this.online=function(e){d.emit("login",p.currentUser,p.currentUser.room),d.on("login_error",(function(e){console.log("login error : "+e)})),d.on("login_successful",(function(e){p.setOnlineUsers(e,p.currentUser),console.log("login_successful")})),d.on("disconnect",(function(e){console.log("socket disconnected. Reason: "+e)}))},this.offline=function(){d.emit("offline");var e=p.currentUser.room;null!=e&&null!=e&&(d.emit("leave_room",e),o.clear())},this.renegotiate=function(e,t){Object.keys(p.contacts).forEach((function(n){var a=p.contacts[n];a.streams.audio=e,a.streams.video=t,a.renegotiate()}))},this.sendChatMessage=function(e){if("ALL"===e.toUser)for(var t=0;t<p.onlineUsers.length;t++)p.onlineUsers[t].socket!=p.currentUser.socket&&d.emit("sendMessage",p.onlineUsers[t],{type:"chatMessage",messageData:e});else d.emit("sendMessage",e.toUser,{type:"chatMessage",messageData:e})},this.disconnectCurrentUserSocket=function(){p.removeListeners(),console.log("socket listeners are removed"),d&&(d.close(),console.log("socket disconnected"))},n.$on("onlineUser",(function(e,t){var n=t.fullName;window.plugins.toast.showWithOptions({message:n+" "+l.instant("ASSISTBOX_ONLINE"),duration:"long",position:"top",addPixelsY:40},(function(){}),(function(){}))})),n.$on("offlineUser",(function(e,t){var n=t.fullName;window.plugins.toast.showWithOptions({message:n+" "+l.instant("ASSISTBOX_OFFLINE"),duration:"long",position:"top",addPixelsY:40},(function(){}),(function(){}))})),n.$on("addToGroup",(function(e,t){var n=t.fullName;window.plugins.toast.showWithOptions({message:n+" "+l.instant("ASSISTBOX_JOINED_THE_CALL"),duration:"long",position:"top",addPixelsY:40},(function(){}),(function(){}))})),n.$on("leftCallInfo",(function(e,t){var n=t.fullName;t.contactCount;window.plugins.toast.showWithOptions({message:n+" "+l.instant("ASSISTBOX_HAS_LEFT_CALL"),duration:"long",position:"bottom",addPixelsY:-40},(function(){}),(function(){}))})),n.$on("ignoreCallInfo",(function(e,t){var a=t.fullName;t.contactCount;n.sendingCall=!1,n.contactName="",StatusBar.hide(),StatusBar.overlaysWebView(!0),clearTimeout(n.sendingCallTimeCounterIntervalId),window.plugins.toast.showWithOptions({message:a+" "+l.instant("ASSISTBOX_HAS_REJECTED_CALL"),duration:"long",position:"bottom",addPixelsY:-40},(function(){}),(function(){}))})),n.$on("showBusyToastr",(function(e,t){var n=t.fullName;window.plugins.toast.showWithOptions({message:n+" "+l.instant("ASSISTBOX_BUSY"),duration:"long",position:"bottom",addPixelsY:-40},(function(){}),(function(){}))})),n.$on("updateCurrentUserSocket",(function(e,t){p.currentUser.socket=t}))}n.$inject=["$location","$timeout","$rootScope","UserService","$state","$injector","TokenStorage","$compile","$translate","ConfigurationService","$q"],e.exports=n},function(e,t){function n(e,t,n){this.login=function(a){var r=n.getPath(),i=e.defer();return t({method:"post",url:r+"/rest/authenticationService/login",data:a,headers:{"Content-Type":"application/json"}}).then((function(e){i.resolve(e)}),(function(e){i.reject(e)})),i.promise}}n.$inject=["$q","$http","ServicePath"],e.exports=n},function(e,t){function n(e){this.isEmpty=function(e){return!e||0===e.length},this.createUrl=function(t,n,a){var r="";return this.isEmpty(t)||this.isEmpty(n)||(r=e.getStoragePath()+"/"+t+"/"+n+"?"+a),r},this.createLocalUrl=function(t,n){var a="";return this.isEmpty(t)||this.isEmpty(n)||(a=e.getStoragePath()+"/"+t+"/"+n),a}}n.$inject=["ServicePath"],e.exports=n},function(e,t,n){"use strict";function a(e,t,n){var a;function r(){t.get("$ionicLoading").hide()}return{request:function(e){return e.headers.HideLoadingBar?delete e.headers.HideLoadingBar:(a=!0,t.get("$ionicLoading").show({content:"Loading",animation:"fade-in",showBackdrop:!0})),e},response:function(e){return a=!1,n((function(){a||r()}),1e3),e},responseError:function(t){return r(),e.reject(t)}}}a.$inject=["$q","$injector","$timeout"],e.exports=a},function(e,t,n){"use strict";function a(e){this.findMimeTypeFromFileName=function(n){var a=e.defer();try{var r=t(n);r?r=r.toUpperCase():a.reject("File type is not supported."),$.getJSON("mime_types.json",(function(e){Object.keys(e).forEach((function(t){for(var n=e[t],i=0;i<n.length;i++)if(n[i].toUpperCase()==r){a.resolve(t);break}}))})).fail((function(){a.reject()}))}catch(e){return a.reject(e)}return a.promise};var t=function(e){return e?e.split(".").pop():null}}a.$inject=["$q"],e.exports=a}]);